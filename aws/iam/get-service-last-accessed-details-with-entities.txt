GET-SERVICE-LAST-ACCESSED-DETGET-SERVICE-LAST-ACCESSED-DETAILS-WITH-ENTITIES()



NAME
       get-service-last-accessed-details-with-entities -

DESCRIPTION
       After  you generate a group or policy report using the GenerateService-
       LastAccessedDetails operation, you can use the JobId parameter in  Get-
       ServiceLastAccessedDetailsWithEntities  .  This operation retrieves the
       status of your report job and a list of entities that could  have  used
       group or policy permissions to access the specified service.

       o Group   For a group report, this operation returns a list of users in
         the group that could have used the groups policies in an  attempt  to
         access the service.

       o Policy   For  a policy report, this operation returns a list of enti-
         ties (users or roles) that could have used the policy in  an  attempt
         to access the service.

       You  can  also  use this operation for user or role reports to retrieve
       details about those entities.

       If the operation fails,  the  GetServiceLastAccessedDetailsWithEntities
       operation returns the reason that it failed.

       By default, the list of associated entities is sorted by date, with the
       most recent access listed first.

       See also: AWS API Documentation

       See 'aws help' for descriptions of global parameters.

SYNOPSIS
            get-service-last-accessed-details-with-entities
          --job-id <value>
          --service-namespace <value>
          [--max-items <value>]
          [--marker <value>]
          [--cli-input-json | --cli-input-yaml]
          [--generate-cli-skeleton <value>]

OPTIONS
       --job-id (string)
          The ID of the request generated by the  GenerateServiceLastAccessed-
          Details operation.

       --service-namespace (string)
          The  service  namespace  for an Amazon Web Services service. Provide
          the service namespace to learn when the IAM entity last attempted to
          access the specified service.

          To  learn  the  service  namespace  for  a service, see Actions, re-
          sources, and condition keys for Amazon Web Services services in  the
          IAM  User Guide . Choose the name of the service to view details for
          that service. In the first paragraph, find the service  prefix.  For
          example,  (service prefix: a4b) . For more information about service
          namespaces, see Amazon Web Services service namespaces in the Amazon
          Web Services General Reference .

       --max-items (integer)
          Use this only when paginating results to indicate the maximum number
          of items you want in the response. If additional items exist  beyond
          the maximum you specify, the IsTruncated response element is true .

          If  you  do not include this parameter, the number of items defaults
          to 100. Note that IAM might return fewer results,  even  when  there
          are  more  results available. In that case, the IsTruncated response
          element returns true , and Marker contains a value to include in the
          subsequent call that tells the service where to continue from.

       --marker (string)
          Use  this  parameter only when paginating results and only after you
          receive a response indicating that the results are truncated. Set it
          to the value of the Marker element in the response that you received
          to indicate where the next call should start.

       --cli-input-json | --cli-input-yaml (string) Reads arguments  from  the
       JSON  string  provided.  The JSON string follows the format provided by
       --generate-cli-skeleton. If other arguments are provided on the command
       line,  those  values  will override the JSON-provided values. It is not
       possible to pass arbitrary binary values using a JSON-provided value as
       the  string  will  be  taken literally. This may not be specified along
       with --cli-input-yaml.

       --generate-cli-skeleton (string) Prints a  JSON  skeleton  to  standard
       output without sending an API request. If provided with no value or the
       value input, prints a sample input JSON that can be used as an argument
       for --cli-input-json. Similarly, if provided yaml-input it will print a
       sample input YAML that can be used with --cli-input-yaml.  If  provided
       with  the  value  output, it validates the command inputs and returns a
       sample output JSON for that command.

       See 'aws help' for descriptions of global parameters.

EXAMPLES
       To retrieve a service access report with details for a service

       The following  get-service-last-accessed-details-with-entities  example
       retrieves  a report that contains details about IAM users and other en-
       tities that accessed the specified service. To generate a  report,  use
       the  generate-service-last-accessed-details  command.  To get a list of
       services accessed with  namespaces,  use  get-service-last-accessed-de-
       tails.

          aws iam get-service-last-accessed-details-with-entities \
              --job-id 78b6c2ba-d09e-6xmp-7039-ecde30b26916 \
              --service-namespace lambda

       Output:

          {
              "JobStatus": "COMPLETED",
              "JobCreationDate": "2019-10-01T03:55:41.756Z",
              "JobCompletionDate": "2019-10-01T03:55:42.533Z",
              "EntityDetailsList": [
                  {
                      "EntityInfo": {
                          "Arn": "arn:aws:iam::123456789012:user/admin",
                          "Name": "admin",
                          "Type": "USER",
                          "Id": "AIDAIO2XMPLENQEXAMPLE",
                          "Path": "/"
                      },
                      "LastAuthenticated": "2019-09-30T23:02:00Z"
                  },
                  {
                      "EntityInfo": {
                          "Arn": "arn:aws:iam::123456789012:user/developer",
                          "Name": "developer",
                          "Type": "USER",
                          "Id": "AIDAIBEYXMPL2YEXAMPLE",
                          "Path": "/"
                      },
                      "LastAuthenticated": "2019-09-16T19:34:00Z"
                  }
              ]
          }

OUTPUT
       JobStatus -> (string)
          The status of the job.

       JobCreationDate -> (timestamp)
          The  date  and  time, in ISO 8601 date-time format , when the report
          job was created.

       JobCompletionDate -> (timestamp)
          The date and time, in ISO 8601 date-time format , when the generated
          report job was completed or failed.

          This  field is null if the job is still in progress, as indicated by
          a job status value of IN_PROGRESS .

       EntityDetailsList -> (list)
          An EntityDetailsList object that contains details about when an  IAM
          entity (user or role) used group or policy permissions in an attempt
          to access the specified Amazon Web Services service.

          (structure)
              An object that contains details  about  when  the  IAM  entities
              (users  or  roles)  were  last  used in an attempt to access the
              specified Amazon Web Services service.

              This data type is a response element in  the   GetServiceLastAc-
              cessedDetailsWithEntities operation.

              EntityInfo -> (structure)
                 The  EntityInfo object that contains details about the entity
                 (user or role).

                 Arn -> (string)
                     The Amazon Resource Name (ARN). ARNs are  unique  identi-
                     fiers for Amazon Web Services resources.

                     For  more  information  about ARNs, go to Amazon Resource
                     Names (ARNs) in the Amazon Web Services General Reference
                     .

                 Name -> (string)
                     The name of the entity (user or role).

                 Type -> (string)
                     The type of entity (user or role).

                 Id -> (string)
                     The identifier of the entity (user or role).

                 Path -> (string)
                     The  path to the entity (user or role). For more informa-
                     tion about paths, see IAM identifiers  in  the  IAM  User
                     Guide .

              LastAuthenticated -> (timestamp)
                 The  date  and  time, in ISO 8601 date-time format , when the
                 authenticated entity last attempted to access Amazon Web Ser-
                 vices.  Amazon  Web  Services does not report unauthenticated
                 requests.

                 This field is null if no IAM entities attempted to access the
                 service within the reporting period .

       IsTruncated -> (boolean)
          A  flag  that  indicates  whether there are more items to return. If
          your results were truncated, you can make  a  subsequent  pagination
          request  using  the Marker request parameter to retrieve more items.
          Note that IAM might return fewer than the MaxItems number of results
          even  when  there  are more results available. We recommend that you
          check IsTruncated after every call to ensure that  you  receive  all
          your results.

       Marker -> (string)
          When  IsTruncated is true , this element is present and contains the
          value to use for the Marker parameter in a subsequent pagination re-
          quest.

       Error -> (structure)
          An  object  that  contains  details  about  the reason the operation
          failed.

          Message -> (string)
              Detailed information about the reason that the operation failed.

          Code -> (string)
              The error code associated with the operation failure.



                             GET-SERVICE-LAST-ACCESSED-DETAILS-WITH-ENTITIES()
